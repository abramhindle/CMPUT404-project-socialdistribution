{% extends "base.html" %}

{% block title %}Posts{% endblock %}


{% block content %}
    {% if user.is_authenticated %}
        {% if posts %}
            <ul id="postListAuthenticated">
            {% for post in posts %}
                <li> Post title: {{ post.title }}</li>
                {% comment %} Change this URL so that it directs correctly{% endcomment %}
                <li> By: <a href="{{post.author.host}}/author/{{ post.author.id }}/posts/">{{ post.author.displayName }}</a> </li>
                <li> <a href="{{host}}/site/posts/editpost/{{post.id}}">Edit post</a> </li>
                <li> <a href="{{host}}/site/posts/comments/{{post.id}}">Comments</a> </li>
                <li> Post description: {{post.description}}</li>
                {% if post.contentType != "text/plain" %}
                <li> Post Content: </li>
                <li><img src="{{ post.content }}" alt="Red dot" /></li>
                {% else %}
                <script>
                    var li = document.createElement("li");
                    li.innerHTML = 'Post content: '+'{{post.content}}';
                    document.getElementById("postListAuthenticated").appendChild(li);
                </script>
                {% endif %}
                <hr>
            {% endfor %}
            </ul>
        {% else %}
            <p>No posts are available.</p>
        {% endif %}
    {% else %}
    <p>No posts are available.  Please login to see your posts.</p>
    {% endif %}
    </p>
{% endblock %}
